/*
	* piSlider v1.0.6
	* http://pascal-iske.de/slider
	*
	* Copyright 2015: Pascal Iske
*/
!function(){$.fn.piSlider=function(e){function a(a){if(C&&console.log("init"),e.loader&&(a.prepend(l),$(".loader").fadeIn(800).delay(100).fadeOut(800,function(){$(this).remove()})),"slide"===e.effect){$(".images img").show();for(var n=$(".images").width(),i=0;_>i;i++)$(".images img:eq("+i+")").css({left:parseInt(n*i)})}else $(".images, .images img:eq("+parseInt(current_image-1)+")").fadeIn("400");if(a.append(f),$(".controls").fadeIn(300),e.arrows&&$(".controls").prepend(h.left).append(h.right),e.progressBar&&($(".controls").append(b),$(".progressbar").css("background-color",e.progressColor),"top"===e.progressPosition&&$(".progressbar").css({top:"0"})),e.pagination){$(".controls").append(w),$(".pagination").css({width:45*_,margin:parseInt(e.height,10)-20+"px auto 0",zIndex:999});for(var i=1;_>=i;i++)$(".pagination").append('<div class="pagination-item" data-slide="'+i+'"></div>');$(".pagination-item[data-slide="+current_image+"]").addClass("active")}e.captions&&($(".controls").append(v),$(".captionbar").append("<a href='"+s(current_image)+"'><span>"+t(current_image)+"</span></a>")),e.shadow&&(a.append(m),$(".shadow").delay(200).fadeIn(500)),$(a).attr("slide",current_image),r()}function r(){$(".captionbar").animate({height:"55px"},600,function(){$(".captionbar span").fadeIn(400,function(){$(".captionbar span").css({display:"block"})})}),$(".progressbar").css({"background-color":e.progressColor,width:0}).delay(400).animate({width:"100%"},8e3,function(){e.captions?$(".captionbar span").fadeOut(400,function(){$(".captionbar").animate({height:"0"},600,function(){e.backwards?p():c()}),$(".progressbar").animate({height:"0"},200,function(){$(".progressbar").removeAttr("style")})}):$(".progressbar").delay(300).animate({height:"0"},200,function(){$(".progressbar").removeAttr("style"),e.backwards?p():c()})})}function t(e){var a=$(".images img:eq("+parseInt(e-1)+")").attr("title");return a?a:""}function s(e){var a=$(".images img:eq("+parseInt(e-1)+")").attr("data-href");return a?a:""}function n(a,t){switch($(".progressbar").css({"background-color":e.progressColor,width:0}),e.effect){default:case"fade":$(".images img:eq("+parseInt(a-1)+")").fadeOut("800",function(){d.hasClass("paused")&&d.removeClass("paused"),$(".images img:eq("+parseInt(t-1)+")").fadeIn("1600")});break;case"slide":var s=$(".images").width();$(".images img:eq("+t+")").css({left:s}),$(".images img:eq("+a+")").animate({left:"-"+s}),$(".images img:eq("+t+")").animate({left:"0"})}e.pagination&&($(".pagination-item").each(function(){$(this).removeClass("active")}),$(".pagination-item[data-slide="+t+"]").addClass("active")),d.attr("slide",t),current_image=t,r()}function i(){u||(u=!0,C&&console.log("paused"),jQuery.queue($(".progressbar")[0],"fx",[]),$(".progressbar").stop(),d.addClass("paused"))}function o(){u&&(u=!1,C&&console.log("resumed"),d.removeClass("paused"),$(".progressbar").delay(200).animate({width:"100%"},8e3,function(){$(".progressbar").delay(300).animate({height:"0"},200,function(){$(".progressbar").removeAttr("style"),c()})}),jQuery.queue($(".progressbar")[0],"fx",function(){jQuery.dequeue(this)}))}function c(){C&&console.log("goto next slide"),$(".progressbar").stop(),e.captions?$(".captionbar span").fadeOut(400,function(){$(".captionbar").animate({height:"0"},600,function(){$(".captionbar a span").remove(),current_image===k?n(current_image,y):n(current_image,parseInt(current_image+1)),$(".captionbar a").attr("href",s(current_image)).append("<span>"+t(current_image)+"</span>")}),$(".progressbar").animate({height:"0"},200,function(){$(".progressbar").removeAttr("style").css({"background-color":e.progressColor,width:0})})}):$(".progressbar").animate({height:"0"},200,function(){current_image===k?n(current_image,y):n(current_image,parseInt(current_image+1)),$(".progressbar").removeAttr("style").css({"background-color":e.progressColor,width:0})})}function p(){C&&console.log("goto previus slide"),$(".progressbar").stop(),e.captions?$(".captionbar span").fadeOut(400,function(){$(".captionbar").animate({height:"0"},600,function(){$(".captionbar a span").remove(),current_image===y?n(current_image,k):n(current_image,parseInt(current_image-1)),$(".captionbar a").attr("href",s(current_image)).append("<span>"+t(current_image)+"</span>")}),$(".progressbar").animate({height:"0"},200,function(){$(".progressbar").removeAttr("style").css({"background-color":e.progressColor,width:0})})}):$(".progressbar").animate({height:"0"},200,function(){current_image===y?n(current_image,k):n(current_image,parseInt(current_image-1)),$(".progressbar").removeAttr("style").css({"background-color":e.progressColor,width:0})})}function g(a){C&&console.log("goto slide #"+a),$(".progressbar").stop(),e.captions?$(".captionbar span").fadeOut(400,function(){$(".captionbar").animate({height:"0"},600,function(){$(".captionbar a span").remove(),n(current_image,a),$(".captionbar a").attr("href",s(current_image)).append("<span>"+t(current_image)+"</span>")}),$(".progressbar").animate({height:"0"},200,function(){$(".progressbar").removeAttr("style").css({"background-color":e.progressColor,width:0})})}):$(".progressbar").animate({height:"0"},200,function(){n(current_image,a),$(".progressbar").removeAttr("style").css({"background-color":e.progressColor,width:0})})}var d=this,e=$.extend({},$.fn.piSlider.defaults,e),u=!1,l='<div class="loader"></div>',m=($("img",this).wrapAll('<div class="images"></div>;'),'<div class="shadow"></div>'),f='<div class="controls" style="z-index:999"></div>',h={left:'<div class="arrow left"></div>',right:'<div class="arrow right"></div>'},b='<div class="progressbar"></div>',v='<div class="captionbar"></div>',w='<div class="pagination"></div>',_=$(".images img").size(),y=1,k=_,C=!1;return d.css({position:"relative","z-index":"100"}),e.fullsize&&(e.shadow=!1,d.css({width:"100%",height:"100%",margin:"0",padding:"0"}),$("body, html").css({width:"100%",height:"100%",margin:"0",padding:"0"})),current_image=0!==e.startImage?e.startImage:y,e.autoplay&&a(d),e.pauseOnHover&&d.hover(function(){i()},function(){o()}),e.keyControlling&&$(document).keydown(function(e){switch(e.keyCode){case 37:e.preventDefault(),p();break;case 39:e.preventDefault(),c();break;case 32:e.preventDefault(),d.hasClass("paused")?d.hasClass("paused")&&(d.removeClass("paused"),o()):(d.addClass("paused"),i())}}),$(document).on("click",".left",function(){p()}),$(document).on("click",".right",function(){c()}),$(document).on("click",".captionbar",function(e){e.preventDefault(),i();var a=this.firstChild.getAttribute("href"),r=window.open(a,"_blank");r?r.focus():alert("Please allow popups for this site")}),$(document).on("click",".pagination-item",function(){g($(this).attr("data-slide"))}),{start:function(){a(d)},stop:function(){i()},pause:function(){i()},resume:function(){o()},nextSlide:function(){c()},prevSlide:function(){p()},"goto":function(e){g(e)}}},$.fn.piSlider.defaults={loader:!0,autoplay:!0,loop:!0,backwards:!1,effect:"fade",duration:"8000",keyControlling:!0,pauseOnHover:!1,shadow:!0,fullsize:!1,progressColor:"grey",progressBar:!0,progressPosition:"bottom",progressShadow:!1,arrows:!0,captions:!0,pagination:!0,startImage:0,width:"1000px",height:"450px"}}(jQuery);
